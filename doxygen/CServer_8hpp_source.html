<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DSI: CServer.hpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>CServer.hpp</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*****************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">* This Source Code Form is subject to the terms of the Mozilla Public</span>
<a name="l00003"></a>00003 <span class="comment">* License, v. 2.0. If a copy of the MPL was not distributed with this file,</span>
<a name="l00004"></a>00004 <span class="comment">* You can obtain one at http://mozilla.org/MPL/2.0/.</span>
<a name="l00005"></a>00005 <span class="comment">* Copyright (c) 2012 Harman International Industries, Inc.</span>
<a name="l00006"></a>00006 <span class="comment">* All rights reserved</span>
<a name="l00007"></a>00007 <span class="comment">****************************************************************/</span>
<a name="l00008"></a>00008 <span class="preprocessor">#ifndef DSI_CSERVER_HPP</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span><span class="preprocessor">#define DSI_CSERVER_HPP</span>
<a name="l00010"></a>00010 <span class="preprocessor"></span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;<a class="code" href="DSI_8hpp.html">dsi/DSI.hpp</a>&quot;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;dsi/CBase.hpp&quot;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &quot;dsi/CChannel.hpp&quot;</span>
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;map&gt;</span>
<a name="l00018"></a>00018 <span class="preprocessor">#include &lt;vector&gt;</span>
<a name="l00019"></a>00019 <span class="preprocessor">#include &lt;set&gt;</span>
<a name="l00020"></a>00020 <span class="preprocessor">#include &lt;cassert&gt;</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="keyword">namespace </span>DSI
<a name="l00024"></a>00024 {
<a name="l00025"></a>00025 
<a name="l00026"></a>00026    <span class="keyword">class </span>COStream;
<a name="l00027"></a>00027    <span class="keyword">class </span>CCommEngine;
<a name="l00028"></a>00028    <span class="keyword">class </span>CConnectRequestHandle;
<a name="l00029"></a>00029    <span class="keyword">class </span>CTCPConnectRequestHandle;
<a name="l00030"></a>00030 
<a name="l00031"></a>00031    <span class="keyword">namespace </span>Private
<a name="l00032"></a>00032    {
<a name="l00033"></a>00033       <span class="keyword">class </span>CDataRequestHandle;
<a name="l00034"></a>00034    }
<a name="l00035"></a>00035 
<a name="l00050"></a><a class="code" href="classDSI_1_1CServer.html">00050</a>    <span class="keyword">class </span><a class="code" href="classDSI_1_1CServer.html">CServer</a> : <span class="keyword">public</span> <a class="code" href="classDSI_1_1CBase.html">CBase</a>
<a name="l00051"></a>00051    {
<a name="l00052"></a>00052       <span class="keyword">friend</span> <span class="keyword">class </span>ConnectionResetter;
<a name="l00053"></a>00053       <span class="keyword">friend</span> <span class="keyword">class </span>CServicebroker;
<a name="l00054"></a>00054       <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="classDSI_1_1CCommEngine.html">CCommEngine</a>;
<a name="l00055"></a>00055       <span class="keyword">friend</span> <span class="keyword">class </span>FindByPartyID;
<a name="l00056"></a>00056 
<a name="l00057"></a>00057    <span class="keyword">public</span>:
<a name="l00058"></a>00058 
<a name="l00072"></a>00072       <a class="code" href="classDSI_1_1CServer.html#ad1f33dbb0e6a4f9f6ea215c3e1e164b0">CServer</a>(<span class="keyword">const</span> <span class="keywordtype">char</span>* ifname, <span class="keyword">const</span> <span class="keywordtype">char</span>* rolename, <span class="keywordtype">int</span> majorVerion, <span class="keywordtype">int</span> minorVersion
<a name="l00073"></a>00073              , <span class="keywordtype">bool</span> enableTCPIP = <span class="keyword">false</span>);
<a name="l00074"></a>00074 
<a name="l00075"></a>00075       ~<a class="code" href="classDSI_1_1CServer.html">CServer</a>();
<a name="l00076"></a>00076 
<a name="l00092"></a>00092       <span class="keyword">inline</span>
<a name="l00093"></a><a class="code" href="classDSI_1_1CServer.html#ab6299b6c375e5d1a82653ce42e79be3e">00093</a>       <span class="keywordtype">void</span> <a class="code" href="classDSI_1_1CServer.html#ab6299b6c375e5d1a82653ce42e79be3e">setUserGroup</a>( <span class="keyword">const</span> std::string&amp; groupName )
<a name="l00094"></a>00094       {
<a name="l00095"></a>00095          <a class="code" href="classDSI_1_1CServer.html#a00ac015be3c688f0c54799881fab6c10">mUserGroup</a> = groupName;
<a name="l00096"></a>00096       }
<a name="l00097"></a>00097 
<a name="l00101"></a>00101       <span class="keyword">inline</span>
<a name="l00102"></a><a class="code" href="classDSI_1_1CServer.html#a1141315bab959464c764976390ca9e87">00102</a>       <span class="keywordtype">bool</span> <a class="code" href="classDSI_1_1CServer.html#a1141315bab959464c764976390ca9e87">isTCPIPEnabled</a>()
<a name="l00103"></a>00103       {
<a name="l00104"></a>00104          <span class="keywordflow">return</span> mTCPIPEnabled ;
<a name="l00105"></a>00105       }
<a name="l00106"></a>00106 
<a name="l00107"></a>00107    <span class="keyword">protected</span>:
<a name="l00108"></a>00108 
<a name="l00130"></a>00130       <span class="keywordtype">int</span> <a class="code" href="classDSI_1_1CServer.html#a5e61d470b1be68b6409251990b7713f9" title="Unblock pending request, (prevent the server from beeing busy) by handling the response...">unblockRequest</a>();
<a name="l00131"></a>00131 
<a name="l00143"></a>00143       <span class="keywordtype">void</span> <a class="code" href="classDSI_1_1CServer.html#aef47975eca3bf5dff98b6d7ebdb8d6ef" title="Prepare the sending of a response to a listener which was unblocked.">prepareResponse</a>(<span class="keywordtype">int</span> handle);
<a name="l00144"></a>00144 
<a name="l00149"></a>00149       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classDSI_1_1CServer.html#a5641fd9e15be8ae051725c58e6a0b903">processRequest</a>( Private::CDataRequestHandle &amp;handle ) = 0 ;
<a name="l00150"></a>00150 
<a name="l00156"></a><a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html">00156</a>       <span class="keyword">struct </span><a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html">ClientConnection</a>
<a name="l00157"></a>00157       {
<a name="l00158"></a><a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#a2708c0bbb6f926149707c2c61fe43c3e">00158</a>          int32_t <a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#a2708c0bbb6f926149707c2c61fe43c3e" title="the unique id of this connection">id</a>;                      
<a name="l00159"></a>00159 
<a name="l00160"></a><a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#a6858ac749e44225fa71bc0f02e0fdd0f">00160</a>          SPartyID <a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#a6858ac749e44225fa71bc0f02e0fdd0f" title="the client id of the connection">clientID</a>;               
<a name="l00161"></a><a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#a74996700b3d09c049f8c84401d25c937">00161</a>          SPartyID <a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#a74996700b3d09c049f8c84401d25c937" title="the server id of the connection">serverID</a>;               
<a name="l00162"></a>00162 
<a name="l00163"></a><a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#ac8c1cdc804acc24a4ecb971ce182f135">00163</a>          notificationid_t <a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#ac8c1cdc804acc24a4ecb971ce182f135" title="the notification id used for the servicebroker">notificationID</a>; 
<a name="l00164"></a><a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#a7cb7a125b79a986820a5c0c6be29823e">00164</a>          std::tr1::weak_ptr&lt;CChannel&gt; <a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#a7cb7a125b79a986820a5c0c6be29823e" title="the transport connection">channel</a>;      
<a name="l00165"></a>00165          uint16_t protoMinor;
<a name="l00166"></a>00166          <a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html">ClientConnection</a>();
<a name="l00167"></a>00167 
<a name="l00169"></a>00169          <span class="keyword">explicit</span> <span class="keyword">inline</span>
<a name="l00170"></a><a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#ad0a89f59812ebbfd47be6ddd9453a864">00170</a>          <a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html">ClientConnection</a>(SPartyID theClientID)
<a name="l00171"></a>00171           : <a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#a6858ac749e44225fa71bc0f02e0fdd0f" title="the client id of the connection">clientID</a>(theClientID)
<a name="l00172"></a>00172          {
<a name="l00173"></a>00173             <span class="comment">// NOOP</span>
<a name="l00174"></a>00174          }
<a name="l00175"></a>00175 
<a name="l00176"></a>00176          <span class="keyword">inline</span>
<a name="l00177"></a>00177          int32_t getId()<span class="keyword"> const</span>
<a name="l00178"></a>00178 <span class="keyword">         </span>{
<a name="l00179"></a>00179             <span class="keywordflow">return</span> <a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#a2708c0bbb6f926149707c2c61fe43c3e" title="the unique id of this connection">id</a>;
<a name="l00180"></a>00180          }
<a name="l00181"></a>00181 
<a name="l00183"></a>00183          <span class="keyword">inline</span>
<a name="l00184"></a><a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#a43307a92e734c73916dda98d5bc4bf3e">00184</a>          <span class="keywordtype">bool</span> <a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#a43307a92e734c73916dda98d5bc4bf3e" title="std::set ordering">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html">ClientConnection</a>&amp; rhs)<span class="keyword"> const</span>
<a name="l00185"></a>00185 <span class="keyword">         </span>{
<a name="l00186"></a>00186             <span class="keywordflow">return</span> <a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#a6858ac749e44225fa71bc0f02e0fdd0f" title="the client id of the connection">clientID</a>.globalID &lt; rhs.<a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html#a6858ac749e44225fa71bc0f02e0fdd0f" title="the client id of the connection">clientID</a>.globalID;
<a name="l00187"></a>00187          }
<a name="l00188"></a>00188       } ;
<a name="l00189"></a>00189 
<a name="l00190"></a><a class="code" href="structDSI_1_1CServer_1_1SessionData.html">00190</a>       <span class="keyword">struct </span><a class="code" href="structDSI_1_1CServer_1_1SessionData.html">SessionData</a>
<a name="l00191"></a>00191       {
<a name="l00192"></a>00192 
<a name="l00193"></a><a class="code" href="structDSI_1_1CServer_1_1SessionData.html#a8dfe88a7a8fb8bc173d4029b497e74bc">00193</a>          int32_t <a class="code" href="structDSI_1_1CServer_1_1SessionData.html#a8dfe88a7a8fb8bc173d4029b497e74bc" title="the session id for sessions">sessionId</a>;    
<a name="l00194"></a><a class="code" href="structDSI_1_1CServer_1_1SessionData.html#a6858ac749e44225fa71bc0f02e0fdd0f">00194</a>          SPartyID <a class="code" href="structDSI_1_1CServer_1_1SessionData.html#a6858ac749e44225fa71bc0f02e0fdd0f" title="the id of the client that set the notification">clientID</a>;    
<a name="l00195"></a><a class="code" href="structDSI_1_1CServer_1_1SessionData.html#a23128dccb07c7eaf0a40fe2259d1bb15">00195</a>          int32_t <a class="code" href="structDSI_1_1CServer_1_1SessionData.html#a23128dccb07c7eaf0a40fe2259d1bb15" title="the sequence number of this session">sequenceNr</a>;   
<a name="l00196"></a>00196 
<a name="l00198"></a>00198          <span class="keyword">inline</span>
<a name="l00199"></a><a class="code" href="structDSI_1_1CServer_1_1SessionData.html#aa657b57ec919c6f371e784dd4e03a319">00199</a>          <a class="code" href="structDSI_1_1CServer_1_1SessionData.html#aa657b57ec919c6f371e784dd4e03a319" title="Create an invalid session data object.">SessionData</a>()
<a name="l00200"></a>00200             : <a class="code" href="structDSI_1_1CServer_1_1SessionData.html#a8dfe88a7a8fb8bc173d4029b497e74bc" title="the session id for sessions">sessionId</a>(DSI::INVALID_SESSION_ID)
<a name="l00201"></a>00201             , <a class="code" href="structDSI_1_1CServer_1_1SessionData.html#a23128dccb07c7eaf0a40fe2259d1bb15" title="the sequence number of this session">sequenceNr</a>(DSI::INVALID_SEQUENCE_NR)
<a name="l00202"></a>00202          {
<a name="l00203"></a>00203             <span class="comment">// NOOP</span>
<a name="l00204"></a>00204          }
<a name="l00205"></a>00205 
<a name="l00206"></a>00206          <span class="keyword">inline</span>
<a name="l00207"></a>00207          <a class="code" href="structDSI_1_1CServer_1_1SessionData.html#aa657b57ec919c6f371e784dd4e03a319" title="Create an invalid session data object.">SessionData</a>(<span class="keyword">const</span> <a class="code" href="structDSI_1_1CServer_1_1SessionData.html">SessionData</a>&amp; rhs)
<a name="l00208"></a>00208             : <a class="code" href="structDSI_1_1CServer_1_1SessionData.html#a8dfe88a7a8fb8bc173d4029b497e74bc" title="the session id for sessions">sessionId</a>(rhs.<a class="code" href="structDSI_1_1CServer_1_1SessionData.html#a8dfe88a7a8fb8bc173d4029b497e74bc" title="the session id for sessions">sessionId</a>)
<a name="l00209"></a>00209             , <a class="code" href="structDSI_1_1CServer_1_1SessionData.html#a6858ac749e44225fa71bc0f02e0fdd0f" title="the id of the client that set the notification">clientID</a>(rhs.<a class="code" href="structDSI_1_1CServer_1_1SessionData.html#a6858ac749e44225fa71bc0f02e0fdd0f" title="the id of the client that set the notification">clientID</a>)
<a name="l00210"></a>00210             , <a class="code" href="structDSI_1_1CServer_1_1SessionData.html#a23128dccb07c7eaf0a40fe2259d1bb15" title="the sequence number of this session">sequenceNr</a>(rhs.<a class="code" href="structDSI_1_1CServer_1_1SessionData.html#a23128dccb07c7eaf0a40fe2259d1bb15" title="the sequence number of this session">sequenceNr</a>)
<a name="l00211"></a>00211          {
<a name="l00212"></a>00212             <span class="comment">// NOOP</span>
<a name="l00213"></a>00213          }
<a name="l00214"></a>00214       };
<a name="l00215"></a>00215 
<a name="l00220"></a><a class="code" href="structDSI_1_1CServer_1_1Notification.html">00220</a>       <span class="keyword">struct </span><a class="code" href="structDSI_1_1CServer_1_1Notification.html">Notification</a> : <span class="keyword">public</span> <a class="code" href="structDSI_1_1CServer_1_1SessionData.html">SessionData</a>
<a name="l00221"></a>00221       {
<a name="l00222"></a><a class="code" href="structDSI_1_1CServer_1_1Notification.html#a9127f124cc695d403214da5908a8ab86">00222</a>          notificationid_t <a class="code" href="structDSI_1_1CServer_1_1Notification.html#a9127f124cc695d403214da5908a8ab86" title="the notification id">notifyID</a>;   
<a name="l00223"></a>00223 
<a name="l00225"></a>00225          <span class="keyword">inline</span>
<a name="l00226"></a><a class="code" href="structDSI_1_1CServer_1_1Notification.html#a9314fec51ed30531053f0c7886ba944c">00226</a>          <a class="code" href="structDSI_1_1CServer_1_1Notification.html#a9314fec51ed30531053f0c7886ba944c" title="Create an invalid Notification object.">Notification</a>()
<a name="l00227"></a>00227             : <a class="code" href="structDSI_1_1CServer_1_1Notification.html#a9127f124cc695d403214da5908a8ab86" title="the notification id">notifyID</a>(INVALID_NOTIFICATION_ID)
<a name="l00228"></a>00228          {
<a name="l00229"></a>00229             <span class="comment">// NOOP</span>
<a name="l00230"></a>00230          }
<a name="l00231"></a>00231 
<a name="l00232"></a>00232          <span class="keyword">inline</span>
<a name="l00233"></a>00233          <a class="code" href="structDSI_1_1CServer_1_1Notification.html#a9314fec51ed30531053f0c7886ba944c" title="Create an invalid Notification object.">Notification</a>(<span class="keyword">const</span> <a class="code" href="structDSI_1_1CServer_1_1Notification.html">Notification</a>&amp; rhs)
<a name="l00234"></a>00234             : <a class="code" href="structDSI_1_1CServer_1_1SessionData.html">SessionData</a>(rhs)
<a name="l00235"></a>00235             , <a class="code" href="structDSI_1_1CServer_1_1Notification.html#a9127f124cc695d403214da5908a8ab86" title="the notification id">notifyID</a>(rhs.<a class="code" href="structDSI_1_1CServer_1_1Notification.html#a9127f124cc695d403214da5908a8ab86" title="the notification id">notifyID</a>)
<a name="l00236"></a>00236          {
<a name="l00237"></a>00237             <span class="comment">// NOOP</span>
<a name="l00238"></a>00238          }
<a name="l00239"></a>00239       };
<a name="l00240"></a>00240 
<a name="l00245"></a>00245       ClientConnection* <a class="code" href="classDSI_1_1CServer.html#a5b8553962b821bb90a5e542ca226840a">findClientConnection</a>(<span class="keyword">const</span> SPartyID&amp; clientId);
<a name="l00246"></a>00246      
<a name="l00252"></a>00252       int32_t <a class="code" href="classDSI_1_1CServer.html#af9c5e55bbbfe96c7bf7372a82f333a13">findSessionId</a>( int32_t seqNr, <span class="keyword">const</span> SPartyID &amp;clientID );
<a name="l00253"></a>00253 
<a name="l00259"></a>00259       <span class="keyword">inline</span>
<a name="l00260"></a><a class="code" href="classDSI_1_1CServer.html#a6f74d6489bf103a1fd25a2368b880285">00260</a>       int32_t <a class="code" href="classDSI_1_1CServer.html#a6f74d6489bf103a1fd25a2368b880285">registerCurrentSession</a>(<span class="keywordtype">void</span>)
<a name="l00261"></a>00261       {
<a name="l00262"></a>00262          assert(<a class="code" href="classDSI_1_1CServer.html#a1ce48a73ba4a376d43d0ce3ecd9713a9" title="id of the current active session">mSessionId</a> != DSI::INVALID_SESSION_ID);
<a name="l00263"></a>00263          <span class="keywordflow">return</span> <a class="code" href="classDSI_1_1CServer.html#a1ce48a73ba4a376d43d0ce3ecd9713a9" title="id of the current active session">mSessionId</a>;
<a name="l00264"></a>00264       }
<a name="l00265"></a>00265 
<a name="l00310"></a>00310       <span class="keywordtype">void</span> <a class="code" href="classDSI_1_1CServer.html#aa1af78c2bfd0c930dba21f2378cc0d0e">addActiveSession</a>(int32_t sessionId);
<a name="l00311"></a>00311 
<a name="l00316"></a>00316       <span class="keywordtype">bool</span> <a class="code" href="classDSI_1_1CServer.html#a888f377b70a4683e7a5f9842f68c13bf">isSessionActive</a>(int32_t sessionId);
<a name="l00317"></a>00317 
<a name="l00325"></a>00325       <span class="keywordtype">void</span> <a class="code" href="classDSI_1_1CServer.html#a35f687611dc29d4bb20b2a021ef1c8d1">clearActiveSessions</a>();
<a name="l00326"></a>00326 
<a name="l00330"></a>00330       <span class="keywordtype">void</span> <a class="code" href="classDSI_1_1CServer.html#a3e24f247ae7b673837d141f47e2741c8">removeSession</a>(int32_t sessionId);
<a name="l00331"></a>00331       
<a name="l00335"></a>00335       <span class="keywordtype">void</span> <a class="code" href="classDSI_1_1CServer.html#a1adaf782a193af9a0166e2e6b7e55990">sendNotification</a>(notificationid_t <span class="keywordtype">id</span>, <a class="code" href="namespaceDSI.html#a0957e0df001dd796895b75f947daddb2">DSI::UpdateType</a> type = <a class="code" href="namespaceDSI.html#a0957e0df001dd796895b75f947daddb2a63cbe25e18a487a6fbd85fb6b89efd98" title="Complete attribute is transmitted to the client, the client implementation will replace...">DSI::UPDATE_COMPLETE</a>, int16_t position = -1, int16_t count = -1);
<a name="l00336"></a>00336 
<a name="l00340"></a>00340       <span class="keywordtype">void</span> <a class="code" href="classDSI_1_1CServer.html#a26285116fd00e5e006152569a8497cf7">removeNotification</a>(<span class="keyword">const</span> SPartyID &amp;clientID, notificationid_t <span class="keywordtype">id</span> = DSI::INVALID_ID);
<a name="l00341"></a>00341 
<a name="l00345"></a>00345       <span class="keyword">virtual</span> <a class="code" href="namespaceDSI.html#a3d8fa5357d8d8f0e3224e5370feeed9f">DSI::DataStateType</a> <a class="code" href="classDSI_1_1CServer.html#a8c885ef07c7d0f2a289f09aa5aa8cab9">getAttributeState</a>(uint32_t <span class="keywordtype">id</span>) = 0 ;
<a name="l00346"></a>00346 
<a name="l00348"></a>00348       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classDSI_1_1CServer.html#a1d94c0f86950869a17ffb14215612026" title="sets the state of the given attribute">setAttributeState</a>(uint32_t <span class="keywordtype">id</span>, <a class="code" href="namespaceDSI.html#a3d8fa5357d8d8f0e3224e5370feeed9f">DSI::DataStateType</a>) = 0 ;
<a name="l00349"></a>00349 
<a name="l00351"></a>00351       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classDSI_1_1CServer.html#aecdea22bb0712e2a64531823a29a981a" title="writes the attribute data to the given DSI output stream">writeAttribute</a>(uint32_t <span class="keywordtype">id</span>, <a class="code" href="classDSI_1_1COStream.html">COStream</a>&amp; ostream, <a class="code" href="namespaceDSI.html#a0957e0df001dd796895b75f947daddb2">DSI::UpdateType</a> type, int16_t position, int16_t count) = 0 ;
<a name="l00352"></a>00352 
<a name="l00357"></a>00357       <span class="keyword">virtual</span> uint32_t <a class="code" href="classDSI_1_1CServer.html#a0f3a2866931270455cd94e9f962f7c02">getResponse</a>(uint32_t requestId) = 0 ;
<a name="l00358"></a>00358 
<a name="l00362"></a>00362       <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classDSI_1_1CServer.html#a99477817c4abd0be1915a10aa1726231">getResponseState</a>(uint32_t responseId) = 0 ;
<a name="l00363"></a>00363 
<a name="l00368"></a>00368       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classDSI_1_1CServer.html#afe7c4486f836c42696752c3a091ed06d">setResponseState</a>(uint32_t responseId, <span class="keywordtype">bool</span> value) = 0 ;
<a name="l00369"></a>00369 
<a name="l00370"></a>00370       <span class="keywordtype">void</span> sendErrorToClient(<span class="keyword">const</span> SPartyID &amp;clientID, uint32_t <span class="keywordtype">id</span>, <a class="code" href="namespaceDSI.html#aa71b5fc2a82d29a91db3a734ff892a49">DSI::ResultType</a> type, uint32_t seqNr);
<a name="l00371"></a>00371 
<a name="l00376"></a>00376       <span class="keywordtype">void</span> <a class="code" href="classDSI_1_1CServer.html#a7ff593f3295154e5263c68dbaeb87c3f">sendResponse</a>(uint32_t responseId, uint32_t <span class="keywordtype">id</span>, <a class="code" href="namespaceDSI.html#aa71b5fc2a82d29a91db3a734ff892a49">DSI::ResultType</a> type, uint32_t* err = 0);
<a name="l00377"></a>00377 
<a name="l00378"></a>00378       <span class="keyword">typedef</span> std::set&lt;ClientConnection&gt; clientconnectionlist_type;
<a name="l00379"></a>00379       <span class="keyword">typedef</span> std::map&lt;int32_t, Notification&gt; unblockedsessionsmap_type;
<a name="l00380"></a>00380       <span class="keyword">typedef</span> std::vector&lt;Notification&gt; notificationlist_type;
<a name="l00381"></a>00381       <span class="keyword">typedef</span> std::vector&lt;SessionData&gt; sessionlist_type;
<a name="l00382"></a>00382       <span class="keyword">typedef</span> std::set&lt;int32_t&gt; activesessionlist_type;
<a name="l00383"></a>00383 
<a name="l00385"></a><a class="code" href="classDSI_1_1CServer.html#a1ce48a73ba4a376d43d0ce3ecd9713a9">00385</a>       int32_t <a class="code" href="classDSI_1_1CServer.html#a1ce48a73ba4a376d43d0ce3ecd9713a9" title="id of the current active session">mSessionId</a> ;
<a name="l00386"></a>00386 
<a name="l00388"></a><a class="code" href="classDSI_1_1CServer.html#a5e5536fd03cb54c36e605f5431cfaf71">00388</a>       uint32_t <a class="code" href="classDSI_1_1CServer.html#a5e5536fd03cb54c36e605f5431cfaf71" title="id of the next response (if any)">mResponseId</a> ;
<a name="l00389"></a>00389 
<a name="l00391"></a><a class="code" href="classDSI_1_1CServer.html#abeb5cd725d28347184179b1fead385ee">00391</a>       clientconnectionlist_type <a class="code" href="classDSI_1_1CServer.html#abeb5cd725d28347184179b1fead385ee" title="list of all logical connections - as registerd by connect requests - to this server...">mClientConnections</a> ;
<a name="l00392"></a>00392 
<a name="l00397"></a><a class="code" href="classDSI_1_1CServer.html#a43d736b3fcf42eec3453ed8ec3685fc6">00397</a>       notificationlist_type <a class="code" href="classDSI_1_1CServer.html#a43d736b3fcf42eec3453ed8ec3685fc6">mNotifications</a> ;
<a name="l00398"></a>00398 
<a name="l00403"></a><a class="code" href="classDSI_1_1CServer.html#a6ce40404b0d8e3a277983775dd118a2c">00403</a>       unblockedsessionsmap_type <a class="code" href="classDSI_1_1CServer.html#a6ce40404b0d8e3a277983775dd118a2c">mUnblockedSessions</a> ;
<a name="l00404"></a>00404 
<a name="l00406"></a><a class="code" href="classDSI_1_1CServer.html#af54c7d13a48f7d5b1af06c073bf35293">00406</a>       sessionlist_type <a class="code" href="classDSI_1_1CServer.html#af54c7d13a48f7d5b1af06c073bf35293" title="list of all sessions">mSessions</a> ;
<a name="l00407"></a>00407 
<a name="l00418"></a><a class="code" href="classDSI_1_1CServer.html#a00ac015be3c688f0c54799881fab6c10">00418</a>       std::string <a class="code" href="classDSI_1_1CServer.html#a00ac015be3c688f0c54799881fab6c10">mUserGroup</a>;
<a name="l00419"></a>00419 
<a name="l00424"></a><a class="code" href="classDSI_1_1CServer.html#a56e07965b9d50151dae2c4001be81a6e">00424</a>       SPartyID <a class="code" href="classDSI_1_1CServer.html#a56e07965b9d50151dae2c4001be81a6e">mTCPServerID</a>;
<a name="l00425"></a>00425       
<a name="l00427"></a>00427       <span class="keyword">class </span>CPrivate;
<a name="l00428"></a>00428       CPrivate* d;
<a name="l00429"></a>00429 
<a name="l00430"></a>00430    <span class="keyword">private</span>:
<a name="l00431"></a>00431 
<a name="l00432"></a>00432       <span class="keywordtype">void</span> cleanupClientConnection(<span class="keyword">const</span> <a class="code" href="structDSI_1_1CServer_1_1ClientConnection.html">ClientConnection</a>&amp; c);
<a name="l00433"></a>00433       
<a name="l00437"></a>00437       <span class="keywordtype">void</span> handleDataRequest(Private::CDataRequestHandle &amp;handle);
<a name="l00438"></a>00438 
<a name="l00442"></a>00442       <span class="keywordtype">void</span> handleDisconnectRequest(<span class="keyword">const</span> SPartyID &amp;clientID);
<a name="l00443"></a>00443 
<a name="l00448"></a>00448       <span class="keywordtype">void</span> handleConnectRequest(CConnectRequestHandle&amp; handle);
<a name="l00449"></a>00449 
<a name="l00454"></a>00454       <span class="keywordtype">void</span> handleConnectRequestTCP(CTCPConnectRequestHandle&amp; handle);
<a name="l00455"></a>00455 
<a name="l00460"></a>00460       <span class="keywordtype">void</span> handleLegacyConnectRequestTCP(CTCPConnectRequestHandle&amp; handle);
<a name="l00461"></a>00461 
<a name="l00466"></a>00466       <span class="keywordtype">bool</span> handleClientDetached(<span class="keywordtype">int</span> <span class="keywordtype">id</span>);
<a name="l00467"></a>00467 
<a name="l00471"></a>00471       <span class="keywordtype">void</span> registerInterface( int32_t channel );
<a name="l00472"></a>00472 
<a name="l00478"></a>00478       <span class="keywordtype">void</span> registerInterfaceTCP( uint32_t address, int32_t port );
<a name="l00479"></a>00479 
<a name="l00484"></a>00484       <span class="keywordtype">void</span> unregisterInterface();
<a name="l00485"></a>00485 
<a name="l00487"></a>00487       activesessionlist_type mActiveSessions;
<a name="l00488"></a>00488 
<a name="l00490"></a>00490       <span class="keywordtype">void</span> removeSessionNotifications(int32_t sessionId);
<a name="l00491"></a>00491       
<a name="l00493"></a>00493       <span class="keywordtype">bool</span> mTCPIPEnabled;
<a name="l00494"></a>00494    };
<a name="l00495"></a>00495 
<a name="l00496"></a>00496 }<span class="comment">//namespace DSI</span>
<a name="l00497"></a>00497 
<a name="l00498"></a>00498 <span class="preprocessor">#endif   // DSI_CSERVER_HPP</span>
<a name="l00499"></a>00499 <span class="preprocessor"></span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Wed Mar 21 12:43:34 2012 for DSI by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
